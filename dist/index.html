<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Type" name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <meta name="description"
    content="icons-font-desktop: A collection of free svg icons and tools for generating icon font.">
  <title>Desktop version of icons-font-customization</title>
</head>

<body>
  <style>
    #version {
      border: 0;
      height: 23px;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
    }
    #div-fonts .title {
      display: inline-block;
      min-width: 130px;
    }
    .one-row {
      padding-bottom: 2px;
    }
    .short-number {
      width: 60px;
    }
  </style>
  <iframe id="version" src="about:blank"></iframe>
  <div style="display: none;">
    <div id="div-show-generating">
      <span><input type="button" onclick="showFontsPanel()" value="Show Generating Fonts"></span>
    </div>
    <div id="div-fonts">
      <input type="button" id="generateFonts" onclick="generateFonts()" value="Start Generating Fonts">
      <input id="show-selected" type="button" onclick="onShowSelected()" value="Show Selected"><br>
      <div class="one-row"><span class="title">Save Location:</span>
        <input id="saveLocation" onchange="saveChanges()" type="text" value="">
        <input type="button" onclick="selectLocation()" value="...">
        <input type="button" onclick="openLocation()" value="Open">
      </div>
      <div class="one-row"><span class="title">File Name:</span>
        <input id="fileName" onchange="saveChanges()" type="text" value="">
      </div>
      <div class="one-row"><span class="title">Font Name:</span>
        <input id="fontName" onchange="saveChanges()" type="text" value="">
      </div>
      <div class="one-row"><span class="title">Font Start Index:</span>
        <input id="startIndex" onchange="saveChanges()" class="short-number" type="number" value="">
      </div>
      <div class="one-row"><span class="title">Font Height:</span>
        <input id="fontHeight" onchange="saveChanges()" class="short-number" type="number" value="">
      </div>
      <div class="one-row"><span class="title">Format: </span>
        <label>woff2: <input id="chk-woff2" onchange="saveChanges()" type="checkbox" value="1" checked></label>,
        <label>woff: <input id="chk-woff" onchange="saveChanges()" type="checkbox" value="1"></label>,
        <label>ttf: <input id="chk-ttf" onchange="saveChanges()" type="checkbox" value="1"></label>,
        <label>eot: <input id="chk-eot" onchange="saveChanges()" type="checkbox" value="1"></label>,
        <label>svg: <input id="chk-svg" onchange="saveChanges()" type="checkbox" value="1"></label>
      </div>

      <div class="one-row"><span class="title">Generate Images:</span>
        <select id="sel-fmt" onchange="saveChanges(this)">
          <option value="">---</option>
          <option value="png">PNG</option>
          <option value="jpeg">JPG</option>
          <option value="x-icon">ICO</option>
          <option value="icns">ICNS</option>
        </select>
        (<span class="size-w-h">Width: <input id="pngW" onchange="saveChanges()" class="short-number" type="number" value="32">px, 
          Height: <input id="pngH" onchange="saveChanges()" class="short-number" type="number" value="32">px</span>
        <span class="size-wh">Size(px):
          16<input onclick="saveChanges(this)" class="i-size-16" type="checkbox" title="size: 16x16">
          <span class="i-size-24p">24<input onclick="saveChanges(this)" class="i-size-24" type="checkbox" title="size: 24x25"></span>
          32<input onclick="saveChanges(this)" class="i-size-32" type="checkbox" title="size: 32x32">
          <span class="i-size-48p">48<input onclick="saveChanges(this)" class="i-size-48" type="checkbox" title="size: 48x48"></span>
          64<input onclick="saveChanges(this)" class="i-size-64" type="checkbox" title="size: 64x64">
          <span class="i-size-96p">96<input onclick="saveChanges(this)" class="i-size-96" type="checkbox" title="size: 96x96"></span>
          128<input onclick="saveChanges(this)" class="i-size-128" type="checkbox" title="size: 128x128">
          256<input onclick="saveChanges(this)" class="i-size-256" type="checkbox" title="size: 256x256">
          <span class="i-size-512p">512<input onclick="saveChanges(this)" class="i-size-512" type="checkbox" title="size: 512x512"></span>
          <span class="i-size-1024p">1024<input onclick="saveChanges(this)" class="i-size-1024" type="checkbox" title="size: 1024x1024"></span>
        </span>)
      </div>
      <div class="one-row"><span class="title"></span>
        PNG/ICO background transparent: <input id="pngTrans" onchange="saveChanges()" type="checkbox">
      </div>
    </div>
  </div>
  <style>
    @font-face {
      font-family: 'i-font';
      src: url('../node_modules/icons-font-customization/dist/index.woff') format('woff');
      font-weight: 400;
      font-style: normal;
    }
  </style>
  
  <style>
    * {
      box-sizing: border-box;
    }

    html,
    body {
      font-family: Sentinel SSm A, Sentinel SSm B, system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    }

    .app-title {
      font-size: 14px;
    }

    .link {
      font-size: 13px;
    }

    /* right panel */
    .navigation-icon {
      display: inline-block;
      position: fixed;
      top: 6px;
      right: 6px;
      z-index: 102;
      border: solid 1px #00f;
      box-shadow: 13px 5px 5px 1px #ccc;
      border-right-style: solid;
      border-right-width: 16px;
      border-top: 12px solid transparent;
      border-left: 0 solid transparent;
      border-bottom: 12px solid transparent;
    }

    .panel {
      display: none;
      position: fixed;
      top: 0;
      right: 0;
      z-index: 101;
      background-color: #fff;
      padding: 2px;
      font-size: .8rem;
      width: 320px;
    }

    .panel.show {
      display: inline-block;
    }

    .panel input[type=range] {
      -webkit-appearance: none;
      appearance: none;
      height: 8px;
      background: #aaa;
      outline: none;
      margin: 5px 0;
    }

    #red,
    #b-red {
      background: #ff0000;
    }

    #green,
    #b-green {
      background: #00ff00;
    }

    #blue,
    #b-blue {
      background: #0000ff;
    }

    .panel-row {
      border: solid 1px #00f;
      border-radius: 3px;
    }

    .control-box.color,
    .control-box.back {
      display: inline-block;
      width: 49%;
    }

    .control-box {
      padding: 10px;
    }

    .control-box .title {
      display: inline-block;
      width: 80px;
    }

    .control-box.search>div {
      padding-bottom: 2px;
    }

    .f-size .value {
      padding: 0 10px;
    }

    #search-container {
      width: 100%;
      padding-bottom: 10px;
    }

    #iconColor,
    #b-iconColor {
      width: 90px;
      margin-left: 4px;
    }

    .hide {
      display: none;
    }

    .icon-wrap {
      font-size: .8rem;
      margin: 3px;
      display: inline-block;
      position: relative;
      padding-bottom: 20px;
    }

    .ifc-box .icon-name {
      position: absolute;
      left: 0;
      bottom: -15px;
      display: inline-block;
      width: 100%;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      line-height: 17px;
    }

    .info .name {
      font-size: 120%;
      font-weight: 600;
    }

    .license {
      font-weight: 600;
    }

    .icon-group.close .icons {
      display: none;
    }

    .icon-wrap .chk {
      display: none;
      position: absolute;
      right: 3px;
      top: 0;
      z-index: 0;
    }

    .icon-wrap.selected .chk {
      display: inline-block;
    }

    .icon-wrap .opt {
      display: none;
      position: absolute;
      right: 22px;
      top: 2px;
      z-index: 3;
      width: 13px;
      height: 13px;
      background-color: #0075ff;
      font-size: 7px;
      color: #fff;
      text-align: center;
      vertical-align: middle;
      padding-bottom: 0px;
      cursor: pointer;
    }

    .icon-wrap:hover .opt {
      display: inline-block;
    }

    .option {
      display: none;
      border: solid 1px #00f;
      border-radius: 3px;
      background-color: #fff;
      padding: 2px;
      box-shadow: 3px 3px 5px 1px #ccc;
      position: relative;
      text-align: left;
    }

    .option .name,
    .option .code {
      white-space: nowrap;
      padding-bottom: 1px;
    }

    .option .name .title,
    .option .code .title {
      width: 31px;
      display: inline-block;
    }

    .option .i-name,
    .option .i-code {
      width: 140px;
      padding: 0;
      margin: 0 10px 0 0;
    }

    .option .i-sizeW,
    .option .i-sizeH {
      width: 45px;
    }

    .option input[type=button] {
      margin: 1px;
    }

    .option .close,
    #search-container .close {
      cursor: pointer;
      font-size: 9px;
    }

    .option .close {
      position: absolute;
      top: -1px;
      right: 2px;
    }

    .option .close:hover,
    #search-container .close:hover {
      color: blue;
      font-weight: bold;
    }

    /* when show option in icon-wrap */
    .icon-wrap .option {
      display: inline-block;
      position: absolute;
      left: 1px;
      bottom: -85px;
      z-index: 3;
      font-size: 9px;
      overflow: hidden;
    }

    .cfg {
      width: 100%;
      height: 200px;
      width: -webkit-fill-available;
    }

    .ifc-box {
      display: -webkit-inline-box;
      display: -webkit-inline-flex;
      display: -moz-inline-box;
      display: -ms-inline-flexbox;
      display: inline-flex;
      position: relative;
      width: 80px;
      height: 80px;
      border-radius: 3px;
      text-align: center;
      vertical-align: middle;
      border: solid 1px #00f;
    }

    .ifc-icon {
      font-size: inherit;
      display: inline-block;
      font-family: 'i-font';
      font-style: normal;
      font-weight: 400;
      font-variant: normal;
      text-transform: none;
      text-rendering: auto;
      line-height: 1em;
      vertical-align: middle;
      text-align: center;
      text-decoration: inherit;
      -moz-osx-font-smoothing: grayscale;
      -webkit-font-smoothing: antialiased;
      margin: auto;
    }

    /* Animation for spinners */
    .ifc-spin {
      animation: ifc-spin-f 2s infinite linear;
      display: inline-block;
    }

    /* @keyframes for IE10~ and major browsers */
    @keyframes ifc-spin-f {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(359deg);
      }
    }
  </style>
  <style id="css-size">
    .icon-wrap .ifc-icon {
      font-size: 48px;
    }
  </style>
  <style id="css-color">
    .icon-wrap {
      color: blue;
    }
  </style>
  <style id="b-css-color"></style>
  <style id="css-icons">
  </style>
  <script>
    var iconsJSON = {
"carbon-icons":{preName:'cb',sub:{
"svg":[
{c:10000,n:'add-glyph',l:178},
{c:10001,n:'add-outline',l:247},
{c:10002,n:'add-solid',l:157},
{c:10003,n:'add',l:127},
{c:10004,n:'api',l:843},
{c:10005,n:'apis',l:843},
{c:10006,n:'app-services',l:876},
{c:10007,n:'applications',l:462},
{c:10008,n:'apps',l:462},
{c:10009,n:'arrow-down',l:159},
{c:10010,n:'arrow-left',l:174},
{c:10011,n:'arrow-right',l:175},
{c:10012,n:'arrow-up',l:170},
{c:10013,n:'arrows',l:250},
{c:10014,n:'asleep-glyph',l:338},
{c:10015,n:'asleep',l:348},
{c:10016,n:'attachment',l:414},
{c:10017,n:'awake',l:383},
{c:10018,n:'back-to-top',l:171},
{c:10019,n:'block-chain',l:924},
{c:10020,n:'calendar',l:296},
{c:10021,n:'caret-down',l:115},
{c:10022,n:'caret-left',l:119},
{c:10023,n:'caret-right',l:115},
{c:10024,n:'caret-up',l:114},
{c:10025,n:'cf-apps',l:681},
{c:10026,n:'chat',l:287},
{c:10027,n:'checkmark-glyph',l:207},
{c:10028,n:'checkmark-outline',l:265},
{c:10029,n:'checkmark-solid',l:212},
{c:10030,n:'checkmark',l:136},
{c:10031,n:'chevron-down',l:127},
{c:10032,n:'chevron-left',l:130},
{c:10033,n:'chevron-right',l:135},
{c:10034,n:'chevron-up',l:132},
{c:10035,n:'close-glyph',l:249},
{c:10036,n:'close-outline',l:314},
{c:10037,n:'close-solid',l:266},
{c:10038,n:'close',l:174},
{c:10039,n:'cloud-foundry',l:681},
{c:10040,n:'code',l:233},
{c:10041,n:'console',l:174},
{c:10042,n:'containers',l:610},
{c:10043,n:'copy-glyph',l:168},
{c:10044,n:'copy',l:355},
{c:10045,n:'crash',l:948},
{c:10046,n:'dashboard',l:174},
{c:10047,n:'data',l:237},
{c:10048,n:'delete-glyph',l:139},
{c:10049,n:'delete',l:191},
{c:10050,n:'devices',l:837},
{c:10051,n:'devops',l:396},
{c:10052,n:'document',l:321},
{c:10053,n:'dollars',l:1376},
{c:10054,n:'download-glyph',l:164},
{c:10055,n:'download',l:186},
{c:10056,n:'draggable',l:164},
{c:10057,n:'edit-glyph',l:198},
{c:10058,n:'edit',l:299},
{c:10059,n:'email',l:233},
{c:10060,n:'error-glyph',l:169},
{c:10061,n:'error-outline',l:205},
{c:10062,n:'error-solid',l:174},
{c:10063,n:'error',l:168},
{c:10064,n:'favorite-outline',l:292},
{c:10065,n:'favorite-solid',l:159},
{c:10066,n:'favorite',l:266},
{c:10067,n:'filter-glyph',l:545},
{c:10068,n:'filter',l:287},
{c:10069,n:'finance',l:280},
{c:10070,n:'financial',l:280},
{c:10071,n:'folder-add',l:238},
{c:10072,n:'folder-glyph',l:115},
{c:10073,n:'folder',l:238},
{c:10074,n:'forum',l:344},
{c:10075,n:'functions',l:993},
{c:10076,n:'grid',l:392},
{c:10077,n:'header-avatar',l:366},
{c:10078,n:'header-chevron',l:146},
{c:10079,n:'header-close',l:212},
{c:10080,n:'header-contact',l:481},
{c:10081,n:'header-docs',l:404},
{c:10082,n:'header-hamburger',l:134},
{c:10083,n:'header-help',l:330},
{c:10084,n:'header-notification',l:390},
{c:10085,n:'header-search',l:187},
{c:10086,n:'header-ticket',l:512},
{c:10087,n:'header-user',l:274},
{c:10088,n:'help-glyph',l:306},
{c:10089,n:'help-outline',l:410},
{c:10090,n:'help-solid',l:308},
{c:10091,n:'help',l:396},
{c:10092,n:'hpa-stress',l:555},
{c:10093,n:'hpa',l:898},
{c:10094,n:'info-glyph',l:222},
{c:10095,n:'info-outline',l:271},
{c:10096,n:'info-solid',l:171},
{c:10097,n:'info',l:295},
{c:10098,n:'infrastructure',l:349},
{c:10099,n:'integration',l:301},
{c:10100,n:'iot',l:1037},
{c:10101,n:'launch-glyph',l:163},
{c:10102,n:'launch',l:268},
{c:10103,n:'light-glyph',l:846},
{c:10104,n:'light',l:773},
{c:10105,n:'link',l:566},
{c:10106,n:'list',l:219},
{c:10107,n:'locked',l:302},
{c:10108,n:'maximize',l:220},
{c:10109,n:'menu',l:134},
{c:10110,n:'minimize',l:238},
{c:10111,n:'mobile',l:761},
{c:10112,n:'network',l:486},
{c:10113,n:'new-tab',l:181},
{c:10114,n:'notification-off',l:719},
{c:10115,n:'notification-on',l:441},
{c:10116,n:'open-whisk',l:339},
{c:10117,n:'overflow-menu',l:198},
{c:10118,n:'pa-stress',l:329},
{c:10119,n:'pa',l:251},
{c:10120,n:'pause-glyph',l:156},
{c:10121,n:'pause-outline',l:232},
{c:10122,n:'pause-solid',l:155},
{c:10123,n:'pause',l:104},
{c:10124,n:'play-glyph',l:148},
{c:10125,n:'play-outline',l:369},
{c:10126,n:'play-solid',l:230},
{c:10127,n:'play',l:94},
{c:10128,n:'portfolio',l:227},
{c:10129,n:'power-glyph',l:240},
{c:10130,n:'power',l:291},
{c:10131,n:'predictive',l:598},
{c:10132,n:'purchase',l:213},
{c:10133,n:'restart-glyph',l:295},
{c:10134,n:'restart',l:195},
{c:10135,n:'save',l:284},
{c:10136,n:'schematics',l:1958},
{c:10137,n:'search-glyph',l:281},
{c:10138,n:'search',l:187},
{c:10139,n:'security',l:450},
{c:10140,n:'services',l:1434},
{c:10141,n:'settings-glyph',l:379},
{c:10142,n:'settings',l:1034},
{c:10143,n:'star-outline',l:212},
{c:10144,n:'star-solid',l:168},
{c:10145,n:'start-glyph',l:148},
{c:10146,n:'start-outline',l:246},
{c:10147,n:'start',l:94},
{c:10148,n:'stop-glyph',l:143},
{c:10149,n:'stop-outline',l:300},
{c:10150,n:'stop-solid',l:192},
{c:10151,n:'stop',l:91},
{c:10152,n:'storage',l:588},
{c:10153,n:'subtract-glyph',l:159},
{c:10154,n:'subtract-outline',l:221},
{c:10155,n:'subtract-solid',l:142},
{c:10156,n:'terminal',l:240},
{c:10157,n:'unlock',l:298},
{c:10158,n:'unlocked',l:404},
{c:10159,n:'upload',l:182},
{c:10160,n:'user',l:456},
{c:10161,n:'visibility-off',l:719},
{c:10162,n:'visibility-on',l:353},
{c:10163,n:'warning-glyph',l:182},
{c:10164,n:'warning-outline',l:317},
{c:10165,n:'warning-solid',l:231},
{c:10166,n:'warning',l:208},
{c:10167,n:'watson',l:1191},
{c:10168,n:'whisk',l:339},
],
}},
}
  </script>
  <script>
    var iconsSrc = JSON.parse(localStorage.getItem('iconsSrc') || '{}');
    var iconsSrcSave = localStorage.getItem('iconsSrcSave') == '1';
    var imageSizeW = localStorage.getItem('imageSizeW') || 32;
    var imageSizeH = localStorage.getItem('imageSizeH') || 32;
    var imageTransparent = localStorage.getItem('imageTransparent') !== 'false';
    var fontSize = localStorage.getItem('fontSize') || 48;
    var frontColor = (localStorage.getItem('color') || '0,0,255').split(',');
    var backColor = (localStorage.getItem('b-color') || '255,255,255').split(',');
    function combineSrc() {
      var css = '';
      var cnt = 0;
      for (var key in iconsJSON) {
        for (var groupKey in iconsJSON[key].sub) {
          var iList = iconsJSON[key].sub[groupKey];
          for (var i = 0, len = iList.length; i < len; i++) {
            var src = iList[i].s || (iList[i].n + '.svg');
            iList[i].s = key + '/' + groupKey + '/' + src;
            if (iconsSrc[iList[i].s]) {
              iList[i]._selected = true;
              cnt++;
            }

            var unicode16 = iList[i].c.toString(16);
            css += '.i' + iList[i].c + ':before{content:"\\' + unicode16 + '";}';
          }
        }
      }
      document.getElementById('css-icons').innerHTML = css;
      return cnt;
    }
    window.onload = function () {
      setTimeout(function () {
        var cnt = combineSrc();
        document.getElementById('saveSelected').checked = iconsSrcSave;
        if (iconsSrcSave) {
          document.getElementById('fontSize').value = fontSize;
          chgFontSize(fontSize);
          document.getElementById('red').value = frontColor[0];
          document.getElementById('green').value = frontColor[1];
          document.getElementById('blue').value = frontColor[2];

          document.getElementById('b-red').value = backColor[0];
          document.getElementById('b-green').value = backColor[1];
          document.getElementById('b-blue').value = backColor[2];
          onChgColor('', '.icon-wrap');
          onChgColor('b-', 'body');
        }
        if (cnt > 0) {
          onShowSelected();
        }
      }, 100);
    }
    function populateOneIcon(iconData, preName, isMain) {
      var oneIcon = '<div class="icon-wrap" onclick="onImg(this)" title="' + preName + '-' + iconData.n + ', svg size: ' + iconData.l + ', src: ' + iconData.s + '">\n'
        + '  <div class="opt" onclick="onOpt(event, this)" title="Options">...</div>\n'
        + '  <input class="chk" type="checkbox" checked="true">\n'
        + '  <div class="ifc-box">\n'
        + '  <i class="ifc-icon i' + iconData.c + '"></i> <span class="icon-name">' + preName + '-' + iconData.n + '</span>\n'
        + '</div></div>\n';
      iconData.real = preName + '-' + iconData.n;
      var el = document.createElement('span');
      el.innerHTML = oneIcon;
      var ret = el.children[0];
      ret._data = iconData;
      if (iconData._selected) {
        ret.classList.add('selected');
      }
      isMain ? iconData._main = ret : iconData._top = ret;
      return el;
    }
    function getData(obj) {
      if (obj._data) {
        return obj._data;
      }
      if (obj.parentNode._data) {
        return obj.parentNode._data;
      }
      return null;
    }
    function onGroup(id) {
      var el = document.getElementById(id);
      el.classList.contains('close') ? el.classList.remove('close') : el.classList.add('close');

      var groupTop = iconsJSON[id];
      if (!groupTop._ok) {
        groupTop._ok = 1;
        setTimeout(function () {
          var groups = el.querySelectorAll('.sub-icons');
          onGroupSub(id, groupTop, groups);
        }, 100);
      }
    }
    function onGroupSub(id, groupTop, groups) {
      for (var i = 0, len = groups.length; i < len; i++) {
        var oneGroup = groups[i];
        oneGroup.innerHTML = '';
        var id2 = oneGroup.id;
        var preName = groupTop.preName;
        var iList = groupTop.sub[id2];
        for (var j = 0, len2 = iList.length; j < len2; j++) {
          var oneIcon = populateOneIcon(iList[j], preName, true);
          oneGroup.appendChild(oneIcon);
        }
      }
    }

    var onSearchTimer = false;
    function onSearch(obj) {
      if (onSearchTimer) {
        clearTimeout(onSearchTimer);
      }
      onSearchTimer = setTimeout(function () {
        onSearchSub(obj);
      }, 500);
    }
    function onSearchClose() {
      document.getElementById('search').value = '';
      var list = document.getElementById('search-container');
      list.classList.add('hide');
      document.getElementById('fonts-container').classList.add('hide');
    }
    function onSearchSub(obj) {
      document.getElementById('fonts-container').classList.add('hide');
      var option = document.querySelector('.icon-wrap #option');
      if (option) { option.parentElement.removeChild(option); }

      var list = document.getElementById('search-container');
      var text = obj.value.trim().toLowerCase();
      if (!text) {
        list.classList.add('hide');
        return;
      }

      list.classList.remove('hide');
      list.innerHTML = 'Search for: ' + text + ' <span class="close" onclick="onSearchClose()"> X</span><br>';
      var cnt = 0;
      for (var key in iconsJSON) {
        var preName = iconsJSON[key].preName;
        for (var groupKey in iconsJSON[key].sub) {
          var iList = iconsJSON[key].sub[groupKey];
          for (var i = 0, len = iList.length; i < len; i++) {
            if (iList[i].n.indexOf(text) >= 0) {
              var oneIcon = populateOneIcon(iList[i], preName, false);
              list.appendChild(oneIcon);
              cnt++;
              if (cnt > 200) {
                var div = document.createElement('div');
                div.innerHTML = '(too many to show...)';
                list.appendChild(div);
                break;
              }
            }
          }
          if (cnt > 200) { break; }
        }
        if (cnt > 200) { break; }
      }
      if (cnt === 0) {
        list.innerHTML += '(no related icons)';
      }
    }

    function onShowSelected() {
      var option = document.querySelector('.icon-wrap #option');
      if (option) { option.parentElement.removeChild(option); }

      document.getElementById('search').value = '';
      document.getElementById('fonts-container').classList.add('hide');
      var list = document.getElementById('search-container');
      var downTxt = typeof (showFontsPanelHtml) === 'function' ? showFontsPanelHtml() : '';
      list.innerHTML = 'Selected Icons: <span class="close" onclick="onSearchClose()"> X</span>' + downTxt + '<br>';
      list.classList.remove('hide');

      var cnt = 0;
      for (var key in iconsJSON) {
        var preName = iconsJSON[key].preName;
        for (var groupKey in iconsJSON[key].sub) {
          var iList = iconsJSON[key].sub[groupKey];
          for (var i = 0, len = iList.length; i < len; i++) {
            if (iList[i]._selected) {
              var oneIcon = populateOneIcon(iList[i], preName, false);
              list.appendChild(oneIcon);
              cnt++;
              if (cnt > 200) {
                var div = document.createElement('div');
                div.innerHTML = '(too many to show...)';
                list.appendChild(div);
                break;
              }
            }
          }
          if (cnt > 200) { break; }
        }
        if (cnt > 200) { break; }
      }
      if (cnt === 0) {
        list.innerHTML += '(no related icons)';
      }
    }
    function getCfgStr(paraObj) {
      var icons = [];
      var cfg = '';
      var cnt = 0;
      var nameSaved = [];
      for (var key in iconsJSON) {
        for (var groupKey in iconsJSON[key].sub) {
          var iList = iconsJSON[key].sub[groupKey];
          for (var i = 0, len = iList.length; i < len; i++) {
            if (iList[i]._selected) {
              // { path: 'font-awesome/brands/apple.svg', name: 'apple', code: 'A', },
              var name = iconsSrc[iList[i].s + '_name'] || iList[i].real;
              if (nameSaved.includes(name)) {
                name += i;
              }
              nameSaved.push(name);
              var src = iList[i].s;
              var savedCode = iconsSrc[iList[i].s + '_code'];
              var oneIcon = { path: src, name: name };
              var code = savedCode ? ", code: " + savedCode : "";
              if (savedCode) { oneIcon.code = savedCode; }
              cfg += "{ path: '" + src + "', name: '" + name + "'" + code + "}," + String.fromCharCode(13);
              icons.push(oneIcon);
              cnt++;
            }
          }
        }
      }
      paraObj.icons = icons;
      paraObj.cfg = cfg;
      paraObj.cnt = cnt;
    }

    function onCfg() {
      document.getElementById('fonts-container').classList.add('hide');
      document.getElementById('search').value = '';
      var list = document.getElementById('search-container');
      list.innerHTML = '';
      list.classList.remove('hide');

      var paraObj = { icons: [], cfg: '', cnt: 0 };
      getCfgStr(paraObj);
      if (paraObj.cnt === 0) {
        list.innerHTML = '(no selected icons) <span class="close" onclick="onSearchClose()"> X</span>';
      } else {
        list.innerHTML = 'How to create my own icons font? Visit: <a class="link" href="https://github.com/uuware/icons-font-customization">project</a> <span class="close" onclick="onSearchClose()"> X</span><br><textarea class="cfg">' + paraObj.cfg + '</textarea>';
      }
    }

    function onImg(obj) {
      var data = getData(obj);
      data._selected = !data._selected;
      if (data._main) {
        data._selected ? data._main.classList.add('selected') : data._main.classList.remove('selected');
      }
      if (data._top) {
        data._selected ? data._top.classList.add('selected') : data._top.classList.remove('selected');
      }
      if (iconsSrcSave) {
        data._selected ? iconsSrc[data.s] = 1 : delete iconsSrc[data.s];
        localStorage.setItem('iconsSrc', JSON.stringify(iconsSrc));
      }
    }

    function onOptClose() {
      var option = document.querySelector('.icon-wrap #option');
      option.parentElement.removeChild(option);
    }
    function onOptSave(event) {
      var option = document.querySelector('.icon-wrap #option');
      var data = option.parentElement._data;
      if (event.srcElement.className === 'i-sizeW') {
        imageSizeW = parseInt(event.srcElement.value || 32);
        if (imageSizeW < 1) { imageSizeW = 1; }
        if (iconsSrcSave) {
          localStorage.setItem('imageSizeW', imageSizeW);
        }
        return;
      }
      if (event.srcElement.className === 'i-sizeH') {
        imageSizeH = parseInt(event.srcElement.value || 32);
        if (imageSizeH < 1) { imageSizeH = 1; }
        if (iconsSrcSave) {
          localStorage.setItem('imageSizeH', imageSizeH);
        }
        return;
      }

      if (event.srcElement.className === 'i-name') {
        if (!event.srcElement.value || event.srcElement.value == data.real) {
          delete iconsSrc[data.s + '_name'];
        } else {
          iconsSrc[data.s + '_name'] = event.srcElement.value;
        }
      } else {
        if (!event.srcElement.value) {
          delete iconsSrc[data.s + '_code'];
        } else {
          iconsSrc[data.s + '_code'] = event.srcElement.value;
        }
      }
      if (iconsSrcSave) {
        localStorage.setItem('iconsSrc', JSON.stringify(iconsSrc));
      }
    }
    function onOpt(event, obj) {
      event.preventDefault();
      event.stopPropagation();

      var option = document.querySelector('.icon-wrap #option');
      if (option) {
        var isSelf = option.parentElement === obj.parentNode;
        option.parentElement.removeChild(option);
        if (isSelf) {
          return;
        }
      }

      option = document.querySelector('#option').cloneNode(true);
      obj.parentNode.appendChild(option);
      var data = option.parentElement._data;
      option.querySelector('.i-name').value = iconsSrc[data.s + '_name'] || data.real;
      option.querySelector('.i-code').value = iconsSrc[data.s + '_code'] || null;
      option.querySelector('.i-name').addEventListener('blur', onOptSave);
      option.querySelector('.i-code').addEventListener('blur', onOptSave);

      const sizeW = option.querySelector('.i-sizeW');
      sizeW.value = imageSizeW;
      sizeW.addEventListener('input', onOptSave);
      sizeW.addEventListener('blur', onOptSave);
      const sizeH = option.querySelector('.i-sizeH');
      sizeH.value = imageSizeH;
      sizeH.addEventListener('input', onOptSave);
      sizeH.addEventListener('blur', onOptSave);
      option.querySelector('.i-no-back').checked = imageTransparent;
      var fmt = localStorage.getItem('imgDownType') || 'png';
      option.querySelector('.img-type').value = fmt;
      onOptShowSize(option, fmt);
      restoreClickSize(option);
    }
    function onOptShowSize(pObj, fmt) {
      pObj.querySelector('.size-w-h').style.display = (fmt == 'x-icon' || fmt == 'icns') ? 'none' : 'inline-block';
      pObj.querySelector('.size-wh').style.display = (fmt == 'x-icon' || fmt == 'icns') ? 'inline-block' : 'none';
      pObj.querySelector('.i-size-24p').style.display = fmt == 'icns' ? 'none' : '';
      pObj.querySelector('.i-size-48p').style.display = fmt == 'icns' ? 'none' : '';
      pObj.querySelector('.i-size-96p').style.display = fmt == 'icns' ? 'none' : '';
      pObj.querySelector('.i-size-512p').style.display = fmt == 'x-icon' ? 'none' : '';
      pObj.querySelector('.i-size-1024p').style.display = fmt == 'x-icon' ? 'none' : '';
    }
    function onSpin(obj) {
      var list = obj.parentNode.parentNode.parentNode.querySelector('.icon-wrap .ifc-icon').classList;
      list.contains('ifc-spin') ? list.remove('ifc-spin') : list.add('ifc-spin');
    }
    function onImageBack(obj) {
      imageTransparent = !imageTransparent;
      setTimeout(function () {
        obj.checked = imageTransparent;
      }, 100);
      if (iconsSrcSave) {
        localStorage.setItem('imageTransparent', imageTransparent);
      }
      return;
    }

    function BufUtil() {
      var sBuf = '';
      this.size = function() { return sBuf.length; }
      this.reset = function() { sBuf = ''; return this; }
      this.addBuffer = function addBuffer(uintArray, offset) {
        var buffer = new Uint8Array(uintArray);
        var i = 0, l = buffer.length;
        var sBuf2 = '';
        while (i < l) sBuf2 += String.fromCharCode(buffer[i++]);
        if (typeof(offset) == 'number' && offset >= 0) {
          sBuf = sBuf.substring(0, offset) + sBuf2 + sBuf.substring(offset + sBuf2.length);
        } else {
          sBuf += sBuf2;
        }
        return this;
      }
      this.getBigEndian = function(buf) {
        var buffer = new Uint8Array(buf);
        var bufferBE = new Uint8Array(buf.byteLength);
        for(var i = buffer.length - 1; i >= 0; i--) bufferBE[buffer.length - 1 - i] = buffer[i];
        return bufferBE;
      }
      this.addString = function(s) { sBuf += s; return this; }
      this.addU8 = function(u, offset) { this.addBuffer(new Uint8Array([u]).buffer, offset); return this; }
      this.addU16 = function(u, offset, isBigEndian) {
        var buf = new Uint16Array([u]).buffer;
        buf = isBigEndian ? this.getBigEndian(buf) : buf;
        this.addBuffer(buf, offset);
      }
      this.addU32 = function(u, offset, isBigEndian) {
        var buf = new Uint32Array([u]).buffer;
        buf = isBigEndian ? this.getBigEndian(buf) : buf;
        this.addBuffer(buf, offset);
        return this;
      }

      this.getUrlData = function() { return 'data:image/vnd.microsoft.icon;base64,' + btoa(sBuf); }
      return this;
    }

    // create the Microsoft ICO format
    function generateIco() {
      var bufUtil = new BufUtil();
      var imgs = [];

      function addFileHeader(imgCount) {
        // .ico header
        bufUtil.addU16(0);        // Reserved space [00, 00]
        bufUtil.addU16(1);        // Indiciate ico file [01, 00]
        bufUtil.addU16(imgCount); // Indiciate imgCount image [01, 00]
      }

      function addDirectoryHeader(wh, dataLength, dataOffset) {
        bufUtil.addU8(wh < 256 ? wh : 0); // Image px width [32]
        bufUtil.addU8(wh < 256 ? wh : 0); // Image px height [32]
        bufUtil.addU8(0);                 // no color palette [00]
        bufUtil.addU8(0);                 // Reserved space [00]
        bufUtil.addU16(1);                // 1 color plane [01, 00]
        bufUtil.addU16(32);               // 32 bits per pixel (bit depth) [20, 00]
        bufUtil.addU32(dataLength + 40);  // image size in bytes
        bufUtil.addU32(dataOffset);       // offset of BMP or PNG data from the beginning of the ICO/CUR file
      }
      function addDibHeader(w, dataLength) {
        // DIB header
        bufUtil.addU32(40);          // header size
        bufUtil.addU32(w);
        bufUtil.addU32(w * 2);       // negative = top-to-bottom
        bufUtil.addU16(1);           // 1 plane
        bufUtil.addU16(32);          // 32-bits (RGBA)
        bufUtil.addU32(0);           // no compression (BI_BITFIELDS, 3)
        bufUtil.addU32(dataLength);  // bitmap size incl. padding (stride x height)
        bufUtil.addU32(0);
        bufUtil.addU32(0);
        bufUtil.addU32(0);
        bufUtil.addU32(0);
      }
      function addDibData(data, w, dataLength) {
        var h = w;
        var buf = new Uint8Array(dataLength); // raw byte buffer (returned)

        var cols = w * 4;
        var rows = h * cols;
        var end = rows - cols;
        var bpp = 4;

        for (let row = 0; row < rows; row += cols) {
          for (let col = 0; col < cols; col += bpp) {
            let tPos = row + col;
            var r = data[tPos];
            var g = data[tPos + 1];
            var b = data[tPos + 2];
            var a = data[tPos + 3];

            tPos = (end - row) + col;
            buf[tPos] = b;
            buf[tPos + 1] = g;
            buf[tPos + 2] = r;
            buf[tPos + 3] = a;
          }
        }
        bufUtil.addBuffer(buf);
      }

      function addImgData(data, wh, pngData) {
        imgs.push({d:data, wh:wh});
      }
      this.addImgData = addImgData;

      function getUrlData() {
        if (imgs.length < 1) { return null; }
        bufUtil.reset();
        var dataOffset = 6 + (16 * imgs.length);
        addFileHeader(imgs.length);
        for (var i = 0; i < imgs.length; i++) {
          // pixelSize should be same with data.buffer.byteLength
          var stride = Math.floor((32 * imgs[i].wh + 31) / 32) * 4; // row length incl. padding
          imgs[i].pixelSize = stride * imgs[i].wh;                 // total bitmap size

          addDirectoryHeader(imgs[i].wh, imgs[i].pixelSize, dataOffset);
          dataOffset += 40 + imgs[i].pixelSize;
        }
        for (var i = 0; i < imgs.length; i++) {
          addDibHeader(imgs[i].wh, imgs[i].pixelSize);
          addDibData(imgs[i].d.data, imgs[i].wh, imgs[i].pixelSize);
        }
        return bufUtil.getUrlData();
      }
      this.getUrlData = getUrlData;

      return this;
    }

    function dataURLtoArray(dataurl) {
      var arr = dataurl.split(','), bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);
      while (n--) {
        u8arr[n] = bstr.charCodeAt(n);
      }
      return u8arr;
    }

    // Create the Apple ICNS format.
    function generateIcns() {
      var bufUtil = new BufUtil();
      var imgs = [];

      function addImgData(data, wh, pngData) {
        imgs.push({d:data, wh:wh, pngData:pngData});
      }
      this.addImgData = addImgData;

      function getChannelData(image, channelIndex) {
        var bpp = 4;
        var length = image.length;
        var buf = new Uint8Array(length / bpp);
        var outPos = 0;
        for (var i = channelIndex; i < length; i += bpp) {
          buf[outPos++] = image[i];
        }
        return buf;
      }
      function concatUintArray(arrays) {
        // sum of individual array lengths
        if (!arrays.length) return null;
        var totalLength = arrays.reduce((acc, value) => acc + value.length, 0);
        var result = new Uint8Array(totalLength);

        var offset = 0;
        for (var array of arrays) {
          result.set(array, offset);
          offset += array.length;
        }
        return result;
      }
      function packBits(buffer) {
        var bufs = [];
        let i = 0;
        while (i < buffer.length) {
          var byte = buffer[i];
          if (i + 2 >= buffer.length) {
            var buf = new Uint8Array(1);
            buf[0] = buffer.length - i;
            bufs.push(buf);
            bufs.push(buffer.slice(i, buffer.length));
            break;
          }
          var repeat = byte === buffer[i + 1] && byte === buffer[i + 2];
          if (repeat) {
            var j = i + 2;
            var length = 3;
            while (++j < buffer.length && byte === buffer[j] && length < 130) {
              length++;
            }
            var buf = new Uint8Array(2);;
            buf[0] = length + 128 - 3;
            buf[1] = byte;
            bufs.push(buf);
            i = j;
          } else {
            var j = i + 2;
            var length = 3;
            var prev = buffer[j];
            var repeatLength = 1;
            while (++j < buffer.length && length < 128) {
              if (prev === buffer[j]) {
                if (++repeatLength > 2) {
                  break;
                }
              } else {
                prev = buffer[j];
                repeatLength = 1;
              }
              length++;
            }
            if (repeatLength > 2) {
              j -= 2;
              length -= 2;
            }
            var buf = new Uint8Array(1);;
            buf[0] = length - 1;
            bufs.push(buf);
            bufs.push(buffer.slice(i, j));
            i = j;
          }
        }
        return concatUintArray(bufs);
      }
      function packAllBits(image, withAlpha) {
        const R = packBits(getChannelData(image, 0));
        const G = packBits(getChannelData(image, 1));
        const B = packBits(getChannelData(image, 2));
        // if (withAlpha) {
        //   var headId = 'ARGB';
        //   var header = new Uint8Array(headId.length);
        //   for (var i = 0; i < headId.length; ++i) {
        //     header[i] = headId.charCodeAt(i);
        //   }
        //   const A = packBits(getChannelData(image, 3));
        //   return concatUintArray([header, A, R, G, B]);
        // } else {
          return concatUintArray([R, G, B]);
        // }
      }

      function addChunk(icnsChunk, img) {
        // img.d.data, img.pngData, img.wh, img.pixelSize
        var buf = 0;
        switch (icnsChunk.format) {
          case 'png':
            buf = img.pngData;
            break;
          // case 'PackBitsARGB':
          //   if (!img.d.argb) {
          //     img.d.argb = packAllBits(img.d.data, true);
          //   }
          //   buf = img.d.argb;
          //   break;

          case 'PackBitsRGB':
            if (!img.d.rgb) {
              img.d.rgb = packAllBits(img.d.data, false);
            }
            buf = img.d.rgb;
            break;

          case 'Alpha':
            // Aplpha is the data of channel 3.
            if (!img.d.alpha) {
              img.d.alpha = getChannelData(img.d.data, 3);
            }
            buf = img.d.alpha;
            break;
        }
        // Write icon header, eg 'ic10' + (length of icon + icon header length)
        bufUtil.addString(icnsChunk.type);
        bufUtil.addU32(buf.length + 8, false, true);
        bufUtil.addBuffer(buf);
      }

      function getUrlData() {
        // tested on https://offdrive.com/convert/ico/png
        // To ensure a icon looks great in Finder, the Dock, Launchpad, and the App Store, provide it in the following sizes:
        // 512x512 pt (512x512 px @1x, 1024x1024 px @2x)
        // 256x256 pt (256x256 px @1x, 512x512 px @2x)
        // 128x128 pt (128x128 px @1x, 256x256 px @2x)
        // 32x32 pt (32x32 px @1x, 64x64 px @2x)
        // 16x16 pt (16x16 px @1x, 32x32 px @2x)
       const icnsChunks = [
          // ic04 and ic05 are supported on versions 10.14 and newer
          // png2icons uses is32 and il32 for better support on older versions.
          // The following order is the same of that created by iconutil on 10.14.
          { type: "ic12", format: 'png', size: 64,  Info: "32x32@2  " },
          { type: "icp6", format: 'png', size: 64,  Info: "64x64    " },
          { type: "ic07", format: 'png', size: 128, Info: "128x128  " },
          { type: "ic13", format: 'png', size: 256, Info: "128x128@2" },
          { type: "ic08", format: 'png', size: 256, Info: "256x256  " },
          // { type: "ic04", format: 'PackBitsARGB', size: 16,   Info: "16x16    " },
          { type: "ic14", format: 'png', size: 512, Info: "256x256@2" },
          { type: "ic09", format: 'png', size: 512, Info: "512x512  " },
          // { type: "ic05", format: 'PackBitsARGB', size: 32,   Info: "32x32    " },
          { type: "ic10", format: 'png', size: 1024, Info: "512x512@2" },
          { type: "ic11", format: 'png', size: 32, Info: "16x16@2  " },
          { type: "il32", format: 'PackBitsRGB', size: 32, Info: "32x32    " },
          { type: "l8mk", format: 'Alpha', size: 32, Info: "32x32    " },
          { type: "is32", format: 'PackBitsRGB', size: 16, Info: "16x16    " },
          { type: "s8mk", format: 'Alpha', size: 16, Info: "16x16    " },
          // icp5 and icp4 may not work in Finder in older versions (e. g. 10.12).
          // { type: "icp5", format: 'png',     size: 32,   Info: "32x32    " },
          // { type: "icp4", format: 'png',     size: 16,   Info: "16x16    " },
        ];

        if (imgs.length < 1) { return null; }
        bufUtil.reset();

        // ICNS header, "icns" + length of file (written later)
        bufUtil.addString('icns');
        bufUtil.addU32(0);

        for (var j = 0; j < icnsChunks.length; j++) {
          for (var i = 0; i < imgs.length; i++) {
            if (imgs[i].wh === icnsChunks[j].size) {
              addChunk(icnsChunks[j], imgs[i]);
            }
          }
        }
        bufUtil.addU32(bufUtil.size(), 4, true);
        return bufUtil.getUrlData();
      }
      this.getUrlData = getUrlData;

      return this;
    }

    function getImageData(image, rgbColor, rgbBackColor, imageFormat) {
      var canvas2 = document.createElement('canvas');
      canvas2.width = image.width;
      canvas2.height = image.height;
      var ctx2 = canvas2.getContext('2d');
      ctx2.fillStyle = rgbColor;
      ctx2.fillRect(0, 0, canvas2.width, canvas2.height);
      ctx2.globalCompositeOperation = "destination-in";
      ctx2.drawImage(image, 0, 0);

      var canvas = document.createElement('canvas');
      canvas.width = image.width;
      canvas.height = image.height;
      var ctx = canvas.getContext('2d');
      if (rgbBackColor !== '') {
        ctx.fillStyle = rgbBackColor;
        ctx.fillRect(0, 0, canvas.width, canvas.height);
      }
      ctx.drawImage(canvas2, 0, 0);
      try {
        if (imageFormat == 'x-icon' || imageFormat == 'icns') {
          // x-icon or icns needs both data
          var pngData = canvas.toDataURL('image/png');
          var pixelData = ctx.getImageData(0, 0, image.width, image.height);
          return {pngData: pngData, pixelData: pixelData};
        }
        var imgData = canvas.toDataURL('image/' + imageFormat);
        return imgData;
      } catch (e) {
        alert('For security reason, this page can\'t run locally. Error: ' + e.message);
        return null;
      }
    }
    var iconSizeArray = [16, 24, 32, 48, 64, 96, 128, 256, 512, 1024];
    function onClickSize(obj) {
      var pObj = obj.parentNode;
      for (var i = 0; i < iconSizeArray.length; i++) {
        var chk = pObj.querySelector('.i-size-' + iconSizeArray[i]).checked;
        localStorage.setItem('imgSizeChk-' + iconSizeArray[i], chk);
      }

      setTimeout(function () {
        restoreClickSize(pObj);
      }, 100);
    }
    function restoreClickSize(pObj) {
      for (var i = 0; i < iconSizeArray.length; i++) {
        var chk = localStorage.getItem('imgSizeChk-' + iconSizeArray[i]) == 'true';
        pObj.querySelector('.i-size-' + iconSizeArray[i]).checked = chk;
      }
    }
    function onTypeChanged(obj) {
      var fmt = obj.value;
      localStorage.setItem('imgDownType', fmt);
      onOptShowSize(obj.parentNode, fmt);
    }
    function onDownloadClick(obj) {
      var type = obj.parentNode.querySelector('.img-type').value;
      if (type == '') {
        alert('Select a format first.');
        return;
      }
      onDownloadImage(obj, type);
    }

    function onDownloadImage(obj, fmt) {
      var setData = obj.parentNode.parentNode.parentNode._data;
      var iconSizeObjs = [];
      if (fmt != 'x-icon' && fmt != 'icns') {
        // for png or jpeg, download it directly
        addOneImage(setData, fmt, imageSizeW, imageSizeH, null);
        return;
      }

      for (var i = 0; i < iconSizeArray.length; i++) {
        var chk = localStorage.getItem('imgSizeChk-' + iconSizeArray[i]) == 'true';
        if (chk && ((fmt == 'x-icon' && iconSizeArray[i] < 512) || (fmt == 'icns' && iconSizeArray[i] != 24 && iconSizeArray[i] != 48 && iconSizeArray[i] != 96))) {
          iconSizeObjs.push({
            'size': iconSizeArray[i],
            'data': null
          });
        }
      }
      if (iconSizeObjs.length < 1) {
        alert('Check on sizes first.');
        return;
      }

      // to collect all size of png and pixel data for x-icon or icns
      var saveIconFn = function (imgObject, size) {
        var collectedAll = true;
        for (var i = 0; i < iconSizeObjs.length; i++) {
          if (iconSizeObjs[i].size == size) {
            iconSizeObjs[i].data = imgObject.pixelData;
            iconSizeObjs[i].pngData = dataURLtoArray(imgObject.pngData);
          }
          if (!iconSizeObjs[i].data) {
            collectedAll = false;
          }
        }
        if (!collectedAll) {
          return false;
        }
        // if collected all data for all sizes, then start to generate icon
        var genIconFn = fmt != 'icns' ? new generateIco() : new generateIcns();
        for (var i = 0; i < iconSizeObjs.length; i++) {
          genIconFn.addImgData(iconSizeObjs[i].data, iconSizeObjs[i].size, iconSizeObjs[i].pngData);
        }
        var genData = genIconFn.getUrlData();
        return genData;
      };
      for (var i = 0; i < iconSizeObjs.length; i++) {
        addOneImage(setData, fmt, iconSizeObjs[i].size, iconSizeObjs[i].size, saveIconFn);
      }
    }
    function addOneImage(setData, fmt, width, height, fn) {
      var isElectron = window && window.sendCommand;
      var src = (isElectron ? '../node_modules/icons-font-customization/dist/' : '') + 'svgs/' + setData.s;
      var name = iconsSrc[setData.s + '_name'] || setData.real;

      var hidingBox = document.getElementById('hiding-box');
      var img = document.createElement('img');
      img.onload = function () {
        var rgbColor = getUserColor('');
        var rgbBackColor = (fmt == 'png' || fmt == 'x-icon' || fmt == 'icns') && imageTransparent ? '' : getUserColor('b-');
        var imgData = getImageData(img, rgbColor, rgbBackColor, fmt);
        hidingBox.removeChild(img);

        if (!imgData) {
          return;
        }
        if (fmt === 'x-icon' || fmt === 'icns') {
          imgData = fn(imgData, width);
          if (!imgData) {
            return;
          }
        }
        var a = document.createElement('a');
        if (fmt === 'x-icon') {
          fmt = 'ico';
          a.type = 'image/x-icon';
          // imgData = generateIco(imgData, width, height);
        } else if (fmt === 'jpeg') {
          fmt = 'jpg';
        }
        a.download = name + '.' + fmt;
        a.href = imgData;
        hidingBox.appendChild(a);
        a.click();
        hidingBox.removeChild(a);
      }
      img.width = width;
      img.height = height;
      img.src = src;
      hidingBox.appendChild(img);
    }

    function onNoop(event) {
      event.preventDefault();
      event.stopPropagation();
    }

    function onChkSave(obj) {
      if (obj.checked) {
        localStorage.setItem('iconsSrcSave', '1');
        localStorage.setItem('iconsSrc', JSON.stringify(iconsSrc));
        iconsSrcSave = true;
      } else {
        localStorage.removeItem('iconsSrc');
        localStorage.removeItem('iconsSrcSave');
        iconsSrcSave = false;
      }
    }
    function onSize(obj) {
      var option = document.querySelector('.icon-wrap #option');
      if (option) { option.parentElement.removeChild(option); }

      if (iconsSrcSave) {
        localStorage.setItem('fontSize', obj.value);
      }

      chgFontSize(obj.value);
    }
    function chgFontSize(value) {
      var css = document.getElementById('css-size');
      var wh = value > 50 ? value / 1 + 30 : 80;
      css.innerHTML = '.icon-wrap .ifc-icon {font-size:' + value + 'px;} .ifc-box{width: ' + wh + 'px;height: ' + wh + 'px;}';
      document.querySelector('.control-box.f-size .value').innerHTML = value;
    }
    // get color from scroll bar
    function getUserColor(pre) {
      var r = document.getElementById(pre + 'red').value;
      var g = document.getElementById(pre + 'green').value;
      var b = document.getElementById(pre + 'blue').value;

      var rgb = r + ',' + g + ',' + b;
      if (iconsSrcSave) {
        localStorage.setItem(pre + 'color', rgb);
      }
      return 'rgb(' + rgb + ')';
    }
    function turn10To16(num) {
      var v16 = '0' + (num / 1).toString(16);
      return v16.substring(v16.length - 2);
    }
    // get color from input text
    function getUserColor16(pre) {
      var r = turn10To16(document.getElementById(pre + 'red').value.toString(16));
      var g = turn10To16(document.getElementById(pre + 'green').value.toString(16));
      var b = turn10To16(document.getElementById(pre + 'blue').value.toString(16));
      return '#' + r + g + b;
    }
    function onChgColor(pre, el) {
      var css = document.getElementById(pre + 'css-color');
      var rgb = getUserColor(pre);
      css.innerHTML = el + ' {' + (pre === '' ? '' : 'background-') + 'color: ' + rgb + ';}';

      var inputColor = document.getElementById(pre + 'iconColor');
      inputColor.value = getUserColor16(pre);
    }

    function onChgColor2(pre, el) {
      var inputColor = document.getElementById(pre + 'iconColor').value.trim();
      if (inputColor[0] == '#' && inputColor.length == 7) {
        var r = parseInt(inputColor.substring(1, 3), 16);
        var g = parseInt(inputColor.substring(3, 5), 16);
        var b = parseInt(inputColor.substring(5, 7), 16);
        onChgColor2Apply(pre, el, r, g, b);
        return;
      }
      var arr = inputColor.split(',');
      if (arr.length >= 3) {
        var r = parseInt(arr[0], 10);
        var g = parseInt(arr[1], 10);
        var b = parseInt(arr[2], 10);
        onChgColor2Apply(pre, el, r, g, b);
      }
    }
    function onChgColor2Apply(pre, el, r, g, b) {
      if (r >= 0 && r <= 255 && g >= 0 && g <= 255 && b >= 0 && b <= 255) {
        document.getElementById(pre + 'red').value = r;
        document.getElementById(pre + 'green').value = g;
        document.getElementById(pre + 'blue').value = b;
        if (iconsSrcSave) {
          localStorage.setItem(pre + 'color', r + ',' + g + ',' + b);
        }
        var rgb = 'rgb(' + r + ',' + g + ',' + b + ')';
        var css = document.getElementById(pre + 'css-color');
        css.innerHTML = el + ' {' + (pre === '' ? '' : 'background-') + 'color: ' + rgb + ';}';
      }
    }

    function onShowPanel() {
      var panel = document.querySelector('.panel');
      panel.classList.contains('show') ? panel.classList.remove('show') : panel.classList.add('show');
    }
  </script>
  <div class="navigation-icon" onclick="onShowPanel()"></div>

  <div class="panel">

    <div class="panel-row">
      <div class="control-box color">
        <div class="title">Icons Color:</div>
        <div>Input:<input type="text" oninput="onChgColor2('', '.icon-wrap')" id="iconColor" value=""
            title="Input color with format #RRGGBB or RRR,GGG,BBB"></div>
        <input type="range" oninput="onChgColor('', '.icon-wrap')" id="red" min="0" max="255" step="1" value="0">
        <input type="range" oninput="onChgColor('', '.icon-wrap')" id="green" min="0" max="255" step="1" value="0">
        <input type="range" oninput="onChgColor('', '.icon-wrap')" id="blue" min="0" max="255" step="1" value="255">
      </div>
      <div class="control-box back">
        <div class="title">Background:</div>
        <div>Input:<input type="text" oninput="onChgColor2('b-', 'body')" id="b-iconColor" value=""
            title="Input color with format #RRGGBB or RRR,GGG,BBB"></div>
        <input type="range" oninput="onChgColor('b-', 'body')" id="b-red" min="0" max="255" step="1" value="255">
        <input type="range" oninput="onChgColor('b-', 'body')" id="b-green" min="0" max="255" step="1" value="255">
        <input type="range" oninput="onChgColor('b-', 'body')" id="b-blue" min="0" max="255" step="1" value="255">
      </div>
    </div>
    <div class="panel-row">
      <div class="control-box f-size">
        <div><span class="title">Font Size:</span><input id="fontSize" type="range" oninput="onSize(this)" min="10"
            max="200" step="1" value="48"><span class="value">48</span>
        </div>
      </div>
    </div>
    <div class="panel-row">
      <div class="control-box search">
        <div>
          <span class="title">Search:</span><input id="search" type="text" oninput="onSearch(this)" value="">
        </div>
        <div class="auto-save">
          <span class="title">Icons:</span><label><input id="saveSelected" type="checkbox"
              oninput="onChkSave(this)">(Automatically save settings)</label>
        </div>
        <div>
          <span><input id="show-selected" type="button" onclick="onShowSelected()" value="Show Selected">
            <input type="button" onclick="onCfg()" value="Populate Configuration">
            <input type="button" onclick="onSearchClose()" value="X"></span>
        </div>
      </div>
    </div>
  </div>

  <div class="hide" id="hiding-box">
  </div>

  <h1 id="app-title">free-icons-customization <span class="app-title">By uuware</span> <a class="link"
      href="https://github.com/uuware/icons-font-customization">project</a>
  </h1>
  <div id="app-description">A collection of free svg icons and tools for generating icon font. Click on the icon at
    top-right corner to
    change color or size.<br>
    (The font used by this page is about 3.8 MB, so depending on your internet, it may be slow to load the font to show
    icons properly)
  </div>
  <br>

  <div id="option" class="option" onclick="onNoop(event)">
    <div class="close" onclick="onOptClose()">X</div>
    <div class="name" title="New name for this icon, blank for original name">
      <span class="title">Name:</span><input class="i-name" type="text" value="">
    </div>
    <div class="code" title="The code indicates this icon in generated font">
      <span class="title">Code:</span><input class="i-code" type="number" min=1 max=2000 value="1">
    </div>
    <div class="name">
      <span class="title"></span><select class="img-type" onchange="onTypeChanged(this)">
        <option value="png" title="Download PNG format">PNG</option>
        <option value="jpeg" title="Download JPEG format">JPG</option>
        <option value="x-icon" title="Download Windows Ico format">ICO</option>
        <option value="icns" title="Download Apple Icns format">ICNS</option>
      </select><input type="button" onclick="onDownloadClick(this)" value="Download Image"
        title="Download Image of selected type">
      <input type="button" value="Spin" onclick="onSpin(this)" title="Apply spinning style">
      <br>
      <span class="title"></span>
      <span class="size-w-h">Width: <input class="i-sizeW" type="number" value="32">, Height: <input class="i-sizeH"
          type="number" value="32"></span>
      <span class="size-wh">Size(px):
        16<input onclick="onClickSize(this)" class="i-size-16" type="checkbox" title="size: 16x16">
        <span class="i-size-24p" onclick="onClickSize(this)">24<input class="i-size-24" type="checkbox" title="size: 24x25"></span>
        32<input onclick="onClickSize(this)" class="i-size-32" type="checkbox" title="size: 32x32">
        <span class="i-size-48p" onclick="onClickSize(this)">48<input class="i-size-48" type="checkbox" title="size: 48x48"></span>
        64<input onclick="onClickSize(this)" class="i-size-64" type="checkbox" title="size: 64x64">
        <span class="i-size-96p" onclick="onClickSize(this)">96<input class="i-size-96" type="checkbox" title="size: 96x96"></span>
        128<input onclick="onClickSize(this)" class="i-size-128" type="checkbox" title="size: 128x128">
        256<input onclick="onClickSize(this)" class="i-size-256" type="checkbox" title="size: 256x256">
        <span class="i-size-512p" onclick="onClickSize(this)">512<input class="i-size-512" type="checkbox" title="size: 512x512"></span>
        <span class="i-size-1024p" onclick="onClickSize(this)">1024<input class="i-size-1024" type="checkbox" title="size: 1024x1024"></span>
      </span>
      <br>
      <span class="title"></span><span title="If not checked then use current background color">PNG/ICO Background
        Transparent:
        <input onclick="onImageBack(this)" class="i-no-back" type="checkbox"></span>
    </div>
  </div>


  <div class="hide" id="fonts-container"></div>
  <div class="hide" id="search-container"></div>
  <div class="icon-container">

    
    
<div class="icon-group close" id="carbon-icons">
<div class="info"><label class="name"><input type="checkbox" title="show or hide icons" onclick="onGroup('carbon-icons')">carbon-icons</label>,
Source: <a target="_blank" href="https://github.com/carbon-design-system/carbon-icons">visit</a>, 
License: <span class="license"><a target="_blank" href="https://github.com/carbon-design-system/carbon-icons/blob/master/LICENSE.md">Apache-2.0 (Copy License File)</a></span>
</div>
<div class="icons">
<div class="about">SVG icon library for the Carbon Design System</div>

<div class="sub">svg</div>
<div id="svg" class="sub-icons">Loading...</div>
</div>
</div>


  </div>
  

  <script>
    
    function byId(id) {
      return document.getElementById(id);
    }
    function init() {
      byId('app-title').innerHTML = `free-icons-desktop <span class="app-title">By uuware</span> <a class="link" href="https://github.com/uuware/icons-font-desktop">project</a>`;
      byId('app-description').innerHTML = `Desktop version of free-icons-customization, a collection of free svg icons and tools for generating icon font. Click on the icon at top-right corner to
    change color or size.`;
      iconsSrcSave = true;
      localStorage.setItem('iconsSrcSave', '1');
      byId('saveSelected').checked = iconsSrcSave;
      var autoSave = document.querySelector('.control-box.search div.auto-save');
      autoSave.style.display = 'none';

      var panelSearch = document.querySelector('.control-box.search');
      panelSearch.appendChild(byId('div-show-generating'));

      var panelFonts = document.querySelector('#fonts-container');
      panelFonts.appendChild(byId('div-fonts'));

      byId('saveLocation').value = localStorage.getItem('saveLocation') || '';
      byId('fileName').value = localStorage.getItem('fileName') || 'i-font';
      byId('fontName').value = localStorage.getItem('fontName') || 'i-font';
      byId('startIndex').value = localStorage.getItem('startIndex') || '10000';
      byId('fontHeight').value = localStorage.getItem('fontHeight') || '1024';

      byId('chk-woff2').checked = localStorage.getItem('chk-woff2') != 'false';
      byId('chk-woff').checked = localStorage.getItem('chk-woff') == 'true';
      byId('chk-ttf').checked = localStorage.getItem('chk-ttf') == 'true';
      byId('chk-eot').checked = localStorage.getItem('chk-eot') == 'true';
      byId('chk-svg').checked = localStorage.getItem('chk-svg') == 'true';

      byId('sel-fmt').value = localStorage.getItem('sel-fmt') || '';
      byId('pngW').value = localStorage.getItem('pngW') || '32';
      byId('pngH').value = localStorage.getItem('pngH') || '32';
      byId('pngTrans').checked = localStorage.getItem('pngTrans') !== 'false';

      var pSize = byId('div-fonts');
      for (var i = 0; i < iconSizeArray.length; i++) {
        var chk = localStorage.getItem('imgSizeChk-' + iconSizeArray[i]) == 'true';
        pSize.querySelector('.i-size-' + iconSizeArray[i]).checked = chk;
      }
      onOptShowSize(pSize, byId('sel-fmt').value);
      showVersion();
    }
    init();

    function saveChanges(obj) {
      localStorage.setItem('saveLocation', byId('saveLocation').value);
      localStorage.setItem('fileName', byId('fileName').value);
      localStorage.setItem('fontName', byId('fontName').value);
      localStorage.setItem('startIndex', byId('startIndex').value);
      localStorage.setItem('fontHeight', byId('fontHeight').value);

      localStorage.setItem('chk-woff2', byId('chk-woff2').checked);
      localStorage.setItem('chk-woff', byId('chk-woff').checked);
      localStorage.setItem('chk-ttf', byId('chk-ttf').checked);
      localStorage.setItem('chk-eot', byId('chk-eot').checked);
      localStorage.setItem('chk-svg', byId('chk-svg').checked);

      localStorage.setItem('sel-fmt', byId('sel-fmt').value);
      localStorage.setItem('pngW', byId('pngW').value);
      localStorage.setItem('pngH', byId('pngH').value);
      localStorage.setItem('pngTrans', byId('pngTrans').checked);

      var pSize = byId('div-fonts');
      for (var i = 0; i < iconSizeArray.length; i++) {
        var chk = pSize.querySelector('.i-size-' + iconSizeArray[i]).checked;
        localStorage.setItem('imgSizeChk-' + iconSizeArray[i], chk);
      }
      if (obj && obj.type == 'select-one') {
        var fmt = byId('sel-fmt').value;
        onOptShowSize(pSize, fmt);
      }
    }

    function showFontsPanelHtml() {
      return '  <input type="button" onclick="showFontsPanel()" value="Show Generating Fonts"> ';
    }
    function showFontsPanel() {
      byId('search').value = '';
      var list = byId('search-container');
      list.innerHTML = '';
      list.classList.add('hide');
      document.getElementById('fonts-container').classList.remove('hide');
    }
    function selectLocation() {
      var path = sendCommand({id: 'selectDirectoryDialog', title: 'Select a directory to save icons:', path: byId('saveLocation').value});
      if (path) {
        byId('saveLocation').value = path;
        localStorage.setItem('saveLocation', path);
      }
    }
    function openLocation() {
      var msg = sendCommand({id: 'openLocation', path: byId('saveLocation').value});
      if (msg) {
        alert(msg);
      }
    }

    function createOneImage(src, iconSizeObjs, imageSizeW, imageSizeH, fmt, rgbColor, rgbBackColor) {
      return new Promise((resolve, reject) => {
        if (fmt != 'x-icon' && fmt != 'icns') {
          // for png or jpeg, download it directly
          addOneImageDesktop(src, fmt, imageSizeW, imageSizeH, null, resolve);
          return;
        }

        // to collect all size of png and pixel data for x-icon or icns
        var saveIconFn = function (imgObject, size) {
          var collectedAll = true;
          for (var i = 0; i < iconSizeObjs.length; i++) {
            if (iconSizeObjs[i].size == size) {
              iconSizeObjs[i].data = imgObject.pixelData;
              iconSizeObjs[i].pngData = dataURLtoArray(imgObject.pngData);
            }
            if (!iconSizeObjs[i].data) {
              collectedAll = false;
            }
          }
          if (!collectedAll) {
            return false;
          }
          // if collected all data for all sizes, then start to generate icon
          var genIconFn = fmt != 'icns' ? new generateIco() : new generateIcns();
          for (var i = 0; i < iconSizeObjs.length; i++) {
            genIconFn.addImgData(iconSizeObjs[i].data, iconSizeObjs[i].size, iconSizeObjs[i].pngData);
          }
          var genData = genIconFn.getUrlData();
          return genData;
        };
        for (var i = 0; i < iconSizeObjs.length; i++) {
          addOneImageDesktop(src, fmt, iconSizeObjs[i].size, iconSizeObjs[i].size, saveIconFn, resolve);
        }
      });
    }

    function addOneImageDesktop(src, fmt, width, height, fn, resolve) {
      var hidingBox = document.getElementById('hiding-box');
      var img = document.createElement('img');
      img.onload = function () {
        var rgbColor = getUserColor('');
        var rgbBackColor = (fmt == 'png' || fmt == 'x-icon' || fmt == 'icns') && imageTransparent ? '' : getUserColor('b-');
        var imgData = getImageData(img, rgbColor, rgbBackColor, fmt);
        hidingBox.removeChild(img);

        if (!imgData) {
          return;
        }
        if (fmt === 'x-icon' || fmt === 'icns') {
          imgData = fn(imgData, width);
          if (!imgData) {
            return;
          }
        }
        resolve(imgData);
      }
      img.width = width;
      img.height = height;
      img.src = src;
      hidingBox.appendChild(img);
    }

    async function generateFonts() {
      var saveLocation = byId('saveLocation').value.trim();
      if (saveLocation === '') {
        alert('Please select ocation to save.');
        return;
      }
      var fileName = byId('fileName').value.trim();
      if (fileName === '') {
        alert('Please input file name.');
        return;
      }
      var fontName = byId('fontName').value.trim();
      if (fontName === '') {
        alert('Please input font name.');
        return;
      }

      var paraObj = {icons: [], cfg: '', cnt: 0};
      getCfgStr(paraObj);
      if (!paraObj.icons || paraObj.cnt < 1) {
        alert('Select icons first then generate fonts.');
        return;
      }

      if (!confirm('Do you start to generate fonts (Same files will be overwritten)?')) {
        return;
      }
      var selFmt = byId('sel-fmt').value;
      if (selFmt !== '') {
        var imageTransparent = byId('pngTrans').checked;
        var rgbColor = getUserColor('');
        var rgbBackColor = (selFmt === 'png' || selFmt === 'x-icon') && imageTransparent ? '' : getUserColor('b-');
        var imageSizeW = byId('pngW').value / 1;
        var imageSizeH = byId('pngH').value / 1;

        var iconSizeObjs = [];
        if (selFmt === 'png' || selFmt === 'jpeg') {
          if (imageSizeW < 1 || imageSizeH < 1) {
            alert('Selected to generate images, but width or height is incorrect.');
            return;
          }
        } else if (selFmt === 'x-icon' || selFmt === 'icns') {
          for (var i = 0; i < iconSizeArray.length; i++) {
            var chk = localStorage.getItem('imgSizeChk-' + iconSizeArray[i]) == 'true';
            if (chk && ((selFmt == 'x-icon' && iconSizeArray[i] < 512) || (selFmt == 'icns' && iconSizeArray[i] != 24 && iconSizeArray[i] != 48 && iconSizeArray[i] != 96))) {
              iconSizeObjs.push({
                'size': iconSizeArray[i],
                'data': null
              });
            }
          }
          if (iconSizeObjs.length < 1) {
            alert('Selected to generate images, but need to check on sizes.');
            return;
          }
        }
        for (var i = 0, len = paraObj.icons.length; i < len; i++) {
          var icon = paraObj.icons[i];
          // { path: src, name: name, data: }
          var src = '../node_modules/icons-font-customization/dist/svgs/' + icon.path;
          var imgData = await createOneImage(src, iconSizeObjs, imageSizeW, imageSizeH, selFmt, rgbColor, rgbBackColor);
          if (!imgData) {
            return;
          }
          icon.data = imgData;
        }
      }

      paraObj['pngW'] = imageSizeW;
      paraObj['pngH'] = imageSizeH;
      paraObj['sel-fmt'] = selFmt;
      paraObj.outputPath = saveLocation;
      paraObj.outputName = fileName;
      paraObj.fontName = fontName;
      paraObj.startChar = byId('startIndex').value;
      paraObj.fontHeight = byId('fontHeight').value;
      paraObj['chk-woff2'] = byId('chk-woff2').value;
      paraObj['chk-woff'] = byId('chk-woff').value;
      paraObj['chk-ttf'] = byId('chk-ttf').value;
      paraObj['chk-eot'] = byId('chk-eot').value;
      paraObj['chk-svg'] = byId('chk-svg').value;
      var result = sendCommand({id: 'generateFonts', paras: paraObj});
      alert(`Generated fonts, and open ${saveLocation} to confirm fonts.`);
    }
  </script>
</body>

</html>